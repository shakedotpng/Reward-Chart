<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reward Chart</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1em;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
    }
    .task-list {
      list-style: none;
      padding: 0;
      margin: 0 0 1em 0;
    }
    .task-list li {
      margin: 0.5em 0;
      font-size: 1.1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    button {
      padding: 0.8em 1.5em;
      font-size: 1.2rem;
      margin: 0.3em 0;
      width: auto;
      cursor: pointer;
    }
    #edit-tasks-btn {
      display: block;
      margin: 1em auto;
      width: 50%;
    }

    /* Responsive tweaks */
    @media (max-width: 600px) {
      body {
        padding: 1em 0.5em;
      }
      button {
        width: 100%;
        font-size: 1.3rem;
        margin: 0.5em 0;
      }
      .task-list li {
        font-size: 1.2rem;
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <h1>Reward Chart</h1>
  <ul class="task-list" id="taskList"></ul>
  <button id="edit-tasks-btn" onclick="goToEdit()">Edit Tasks</button>

  <script>
    // Tasks and points
    let tasks = {
      "Washing Towels": 1,
      "Meds on time": 2,
      "Full Shower": 2,
      "Reading your book": 2,
      "Waking up before 9:30": 2,
      "Brushing Teeth": 3,
      "Skin Care Routine": 3,
      "Changing Bedding": 3,
      "Putting all Clothes away": 3,
      "Watching a TV Show": 3,
      "Eating 3 meals": 4,
      "Watching a Film": 4,
      "Washing Dishes": 4,
      "Going to Gym": 8
    };

    // Load from localStorage or initialize
    let points = parseInt(localStorage.getItem('points')) || 0;
    let stars = parseInt(localStorage.getItem('stars')) || 0;
    let savedTasks = JSON.parse(localStorage.getItem('tasks'));
    if (savedTasks) tasks = savedTasks;

    const taskList = document.getElementById('taskList');

    function saveData() {
      localStorage.setItem('points', points);
      localStorage.setItem('stars', stars);
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    function updateUI() {
      taskList.innerHTML = '';
      for (const [task, pts] of Object.entries(tasks)) {
        const li = document.createElement('li');
        li.textContent = `${task} — ${pts} pt${pts > 1 ? 's' : ''}`;

        const btn = document.createElement('button');
        btn.textContent = 'Done';
        btn.onclick = () => {
          points += pts;
          if (points >= 20) {
            stars++;
            points -= 20;
            alert('⭐ Star earned! ⭐');
          }
          saveData();
          updateUI();
        };

        li.appendChild(btn);
        taskList.appendChild(li);
      }

      // Show points and stars
      const footer = document.getElementById('footer');
      if (!footer) {
        const f = document.createElement('div');
        f.id = 'footer';
        f.style.marginTop = '1em';
        f.style.textAlign = 'center';
        document.body.appendChild(f);
      }
      document.getElementById('footer').textContent = `Points: ${points} | Stars: ${stars}`;
    }

    function goToEdit() {
      alert('Editing tasks not yet implemented.');
      // Placeholder for your edit screen navigation
    }

    updateUI();
  </script>
</body>
</html>
